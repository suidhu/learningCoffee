// Generated by CoffeeScript 1.6.3
(function() {
  var contentCenter, topLayer;

  $('.button').click(function() {
    var search;
    search = $('.go').val();
    if (search) {
      return $.getJSON('/search', {
        "words": search
      }, function(json) {
        return document.write(json.result);
      });
    } else {
      return alert('请输入查找内容');
    }
  });

  $(".go").keypress(function(event) {
    if (event.keyCode === 13) {
      return $(".button").triggerHandler('click');
    }
  });

  contentCenter = function(element) {
    var hgt, wdt;
    hgt = $(element).outerHeight();
    wdt = $(element).outerWidth();
    return $(element).css({
      position: 'absolute',
      top: "50%",
      left: "50%",
      marginTop: String(-hgt / 2) + "px",
      marginLeft: String(-wdt / 2) + "px"
    });
  };

  topLayer = function(content) {
    var div, hgt, marginTop, wdt, _content;
    topLayer = $(".topLayer");
    wdt = $(document).width();
    hgt = $(document).height();
    topLayer.height(hgt).width(wdt);
    topLayer.css({
      'background-color': 'rgba(0,0,0,0.6)',
      'position': 'absolute',
      top: "0",
      left: "0",
      "z-index": "100000"
    });
    if (content) {
      div = $("<div></div>");
      topLayer.append(div);
      div.height($(window).height()).width($(window).width());
      marginTop = $(window).scrollTop();
      div.css({
        position: "relative",
        marginTop: marginTop
      });
      _content = $(content).clone();
      div.append(_content);
      return contentCenter(_content);
    }
  };

  $(".login,.register").click(function() {
    return topLayer();
  });

  $(function() {
    var whgt, wwdt;
    whgt = $(window).height();
    wwdt = $(window).width();
    $(".wrap").height(whgt).width(wwdt);
    return contentCenter($(".search")[0]);
  });

}).call(this);
